<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Universe.html">Universe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#CallSubroutine">CallSubroutine</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ClearData">ClearData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ClearFile">ClearFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ClearSelect">ClearSelect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Close">Close</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ContinueExecution">ContinueExecution</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Data">Data</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Date">Date</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Delete">Delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#DeleteField">DeleteField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#EndAllSessions">EndAllSessions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#EndSession">EndSession</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Execute">Execute</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Extract">Extract</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#FileInfo">FileInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#FileLock">FileLock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#FileUnlock">FileUnlock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Format">Format</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#FormList">FormList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#GetList">GetList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#GetValue">GetValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ICONV">ICONV</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Indices">Indices</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Insert">Insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#IsAlpha">IsAlpha</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Locate">Locate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Lock">Lock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Lower">Lower</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#OCONV">OCONV</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Open">Open</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Raise">Raise</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Read">Read</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ReadList">ReadList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ReadNext">ReadNext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#ReadValue">ReadValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#RecordLock">RecordLock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#RecordLocked">RecordLocked</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Release">Release</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Replace">Replace</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#RunIType">RunIType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Select">Select</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#SelectIndex">SelectIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#SessionInfo">SessionInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#SetSession">SetSession</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#SetTimeout">SetTimeout</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#SetValue">SetValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#StartSession">StartSession</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Time">Time</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#TimeDate">TimeDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Trans">Trans</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Unlock">Unlock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#Write">Write</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Universe.html#WriteValue">WriteValue</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>node-pick-universe</h1>
<p>This is an extremely immature package and really more of a learning excersise than anything else. The goal was to be able to call universe subroutines from node and this does work. There are probably a variety of issues that I still need to take a look at but I posted this here so people can get an idea of how to marry node and universe together.</p>
<h2>Build Instructions</h2>
<p>You'll most likely need to build this package from source.</p>
<h3>Requirements</h3>
<ul>
<li>a compiler that can compile C++17. (Which on rhel 7 was a bit of a pain to set up.)</li>
<li>node-gyp</li>
<li>libffi headers (libffi-devel on rhel or libffi-dev on ubuntu)</li>
<li>libuvic and intcall.h to use intercall (I've included these in the repo)</li>
</ul>
<p>There are two libraries that are needed, libuvic and libffi. libuvic is provided by Rocket and I've added that to the lib folder in this repo.</p>
<p>Once you have these things, you can then run the following commands to build the addon.</p>
<pre class="prettyprint source"><code>> git clone git@github.com:Krowemoh/node-pick-universe.git
> cd node-pick-universe
> npm install
> node-gyp configure build
</code></pre>
<p>Good luck!</p>
<h2>Installation Instructions</h2>
<p>Once the addon is built, you can copy the build/Release/universe-native.node file to wherever you want and simply require it in a javascript file to begin calling universe subroutines.</p>
<p>You can test this library by using the index.js provided.</p>
<p>One the BASIC side, you have a program called TEST.NIV which contains:</p>
<pre class="prettyprint source"><code>SUBROUTINE TEST.NIV(ARG1, ARG2, ARG3, ARG4, ARG5)
ARG1 = &quot;ZERO&quot; : @SVM : &quot;ATTR1&quot;
ARG2 = &quot;ONE&quot;
ARG3 = &quot;TWO&quot;
ARG4 = &quot;THREE&quot;
ARG5 = &quot;FOUR&quot;
</code></pre>
<h2>API</h2>
<p>This is straightforward translation of how the intercall library works.</p>
<h3>StartSession</h3>
<p>This function will start a universe session, if it can't, it will throw an error. The session id can be used in SetSession to change which session is currently active.</p>
<pre class="prettyprint source"><code>const session_id = universe.StartSession();
</code></pre>
<h3>EndSession</h3>
<p>This will close the current session and release any locks that are active.</p>
<pre class="prettyprint source"><code>universe.EndSession();
</code></pre>
<h3>Open</h3>
<p>This will return a file handler if the file exists, otherwise it will throw an error.</p>
<pre class="prettyprint source"><code>const INVENTORY_FILE = universe.Open(&quot;INVENTORY-FILE&quot;);
</code></pre>
<h3>Close</h3>
<p>This function will close and release any locks associated with the file handler.</p>
<pre class="prettyprint source"><code>universe.Close(INVENTORY_FILE);
</code></pre>
<h3>Select</h3>
<p>Select requires a file id to select, and it takes in a list number so you can save things to different lists.</p>
<pre class="prettyprint source"><code>universe.Select(FILE_IDENTIFIER_FILE);
// universe.Select(FILE_IDENTIFIER_FILE, 2);
</code></pre>
<h3>ReadNext</h3>
<p>ReadNext will by default read in the 0th list but passing in a number will use that list if it exists. A null is returned when the list empty.</p>
<pre class="prettyprint source"><code>let record = universe.ReadNext();
</code></pre>
<h3>Read</h3>
<p>Read in an entire record by giving an ID and a file handler.</p>
<pre class="prettyprint source"><code>const x = universe.Read(&quot;ITEM.ID&quot;, INVENTORY_FILE);
</code></pre>
<h3>Write</h3>
<p>Write a record to universe, this is a string with the control characters. I wrote the pick-mv library to help manipulate multivalue in javascript.</p>
<pre class="prettyprint source"><code>const mv = require(&quot;pick-mv&quot;);
var arg = [&quot;0&quot;, &quot;1&quot;];
universe.Write(mv.ArrayToMV(arg), CONTROL_FILE, &quot;NIVETHAN&quot;);
</code></pre></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Sun Feb 20 2022 17:07:16 GMT-0500 (Eastern Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>